==================================================
üìä –û–ë–ù–û–í–õ–ï–ù–ò–ï –£–†–û–í–ù–ï–ô –ò –†–ï–ô–¢–ò–ù–ì–û–í –î–û 10000
–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–æ—Ä–º—É–ª (5x –º–µ–¥–ª–µ–Ω–Ω–µ–µ) –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
==================================================

üìÖ –î–∞—Ç–∞: $(date +"%Y-%m-%d %H:%M:%S")
üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å 10000, –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—è –≤ 5 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ

==================================================
üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ë–ê–ó–´ –î–ê–ù–ù–´–•:
==================================================

# 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /root/quantum-nexus

# 2. –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ GitHub
git pull origin main

# 3. –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# –ü–†–ò–ú–ï–ß–ê–ù–ò–ï: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "quantum_nexus" (–Ω–µ quantum_nexus_db)
sudo -u postgres psql quantum_nexus -f UPDATE_LEVELS_10000.sql

# –ò–õ–ò –≤—ã–ø–æ–ª–Ω–∏—Ç—å SQL –∫–æ–º–∞–Ω–¥—ã –Ω–∞–ø—Ä—è–º—É—é:
sudo -u postgres psql quantum_nexus <<EOF
UPDATE users 
SET experience = (total_earned * 0.002) + (total_taps * 0.02) + ((CASE WHEN vip_level IS NOT NULL THEN vip_level ELSE 0 END) * 200),
    level = LEAST(10000, FLOOR(SQRT(GREATEST(0, (total_earned * 0.002) + (total_taps * 0.02) + ((CASE WHEN vip_level IS NOT NULL THEN vip_level ELSE 0 END) * 200)) / 500) + 1)),
    rating = (coins * 0.002) + (total_earned * 0.02) + (total_taps * 0.01) + ((CASE WHEN vip_level IS NOT NULL THEN vip_level ELSE 0 END) * 200000) + (LEAST(10000, FLOOR(SQRT(GREATEST(0, (total_earned * 0.002) + (total_taps * 0.02) + ((CASE WHEN vip_level IS NOT NULL THEN vip_level ELSE 0 END) * 200)) / 500) + 1)) * 2000);
EOF

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
sudo -u postgres psql quantum_nexus -c "SELECT COUNT(*) as total_users, AVG(level) as avg_level, MAX(level) as max_level, AVG(rating) as avg_rating, MAX(rating) as max_rating FROM users;"

==================================================
üìù –ë–´–°–¢–†–û–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï (–æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π):
==================================================

cd /root/quantum-nexus && git pull origin main && sudo -u postgres psql quantum_nexus -f UPDATE_LEVELS_10000.sql

==================================================
‚úÖ –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –û–ë–ù–û–í–õ–ï–ù–ò–Ø:
==================================================

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —É—Ä–æ–≤–Ω–µ–π
sudo -u postgres psql quantum_nexus -c "SELECT COUNT(*) as total, MIN(level) as min_level, AVG(level) as avg_level, MAX(level) as max_level FROM users;"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
sudo -u postgres psql quantum_nexus -c "SELECT id, username, level, experience, rating FROM users ORDER BY rating DESC LIMIT 10;"

==================================================
‚ö†Ô∏è –í–ê–ñ–ù–û:
==================================================

1. –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–∏—Ç –í–°–ï–• –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–æ–≤—ã–º–∏ —Ñ–æ—Ä–º—É–ª–∞–º–∏
2. –£—Ä–æ–≤–Ω–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã –ø–æ –Ω–æ–≤–æ–π —Ñ–æ—Ä–º—É–ª–µ (5x –º–µ–¥–ª–µ–Ω–Ω–µ–µ)
3. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Ç–µ–ø–µ—Ä—å 10000 (–±—ã–ª–æ 100)
4. –†–µ–π—Ç–∏–Ω–≥–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã —Å –Ω–æ–≤—ã–º–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º–∏
5. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º:
   sudo -u postgres pg_dump quantum_nexus_db > backup_before_level_update_$(date +%Y%m%d_%H%M%S).sql

==================================================
üîß –ï–°–õ–ò –ß–¢–û-–¢–û –ü–û–®–õ–û –ù–ï –¢–ê–ö:
==================================================

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥–∞—Ö PostgreSQL
sudo tail -n 50 /var/log/postgresql/postgresql-*.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ
sudo -u postgres psql quantum_nexus -c "SELECT version();"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã users
sudo -u postgres psql quantum_nexus -c "\d users"

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è)
sudo -u postgres psql -l

==================================================

